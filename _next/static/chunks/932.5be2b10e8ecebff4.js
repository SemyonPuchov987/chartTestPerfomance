self.onmessage=async function(t){let{data:e,action:a}=t.data;if("parse"===a){let t=function(t){let e=t.split("\n"),a=e[0].split(",");return e.slice(1).map(t=>{let e=t.split(",");return a.reduce((t,a,l)=>(t[a.trim()]=e[l]?e[l].trim():null,t),{})}).filter(t=>t["DATE&TIME"])}(e),a=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;return t.length<=e?t:(function(t,e){let a,l,n;let r=t.length;if(e>=r||0===e)return t;let s=[],i=(r-2)/(e-2),o=0;s.push(t[o]);for(let u=0;u<e-2;u++){let e=Math.floor((u+1)*i)+1,h=Math.min(Math.floor((u+2)*i)+1,r),p=h-e,{avgX:f,avgY:M}=t.slice(e,h).reduce((t,e)=>(t.avgX+=e.x,t.avgY+=e.y,t),{avgX:0,avgY:0});f/=p,M/=p;let c=Math.floor(u*i)+1,g=Math.min(Math.floor((u+1)*i)+1,r),d=t[o].x,m=t[o].y;a=l=-1;for(let e=c;e<g;e++)(l=.5*Math.abs((d-f)*(t[e].y-m)-(d-t[e].x)*(M-m)))>a&&(a=l,n=e);s.push(t[n]),o=n}return s.push(t[r-1]),s})(t.map((t,e)=>({x:new Date(t["DATE&TIME"]).getTime(),y:parseFloat(t.LAFMAX),index:e})),e).map(e=>t[e.index])}(t),l=function(t){let e=t.map(t=>parseFloat(t.LAFMAX)),a=e.reduce((t,e)=>t+e,0)/e.length,l=e.map(t=>Math.pow(t-a,2));return{mean:a,stdDev:Math.sqrt(l.reduce((t,e)=>t+e,0)/l.length)}}(t);self.postMessage({action:"parsed",data:a,noiseLevels:l})}},_N_E={};